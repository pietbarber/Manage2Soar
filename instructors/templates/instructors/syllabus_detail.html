{% extends "base.html" %}
{% block title %}Syllabus Entry Detail{% endblock %}
{% block content %}
<div class="position-relative syllabus-view">

  {# QR code in the top-right corner - hide on very small screens #}
  <a href="{% url 'public_syllabus_detail' lesson.code %}" class="d-none d-sm-block">
    <img src="{% url 'public_syllabus_qr' lesson.code %}"
         alt="QR code for {{ lesson.code }}"
         class="position-absolute top-0 end-0 m-3"
         style="width: 100px; height: auto;"/>
  </a>


  <h1 class="lesson-title">{{ lesson.code }} - {{ lesson.title }}</h1>


  <div class="mb-4">
    {% if lesson.far_requirement %}
      <p><strong>Required for Solo:</strong> {{ lesson.far_requirement }}</p>
    {% endif %}
    {% if lesson.pts_reference %}
      <p><strong>Required for Private:</strong> {{ lesson.pts_reference }}</p>
    {% endif %}
  </div>

  <div class="border p-3 bg-light lesson-content">
    <div class="lesson-description">
      {{ lesson.description|safe }}
    </div>
  </div>

  <div class="mt-3 d-flex flex-wrap gap-2 no-print-nav">
    {% if prev_lesson %}
      <a href="{% url 'public_syllabus_detail' prev_lesson.code %}" class="btn btn-outline-primary">&larr; View previous lesson ({{ prev_lesson.title }})</a>
    {% endif %}
    <a href="{% url 'public_syllabus_overview' %}" class="btn btn-outline-secondary">Return to Syllabus</a>
    {% if next_lesson %}
      <a href="{% url 'public_syllabus_detail' next_lesson.code %}" class="btn btn-outline-primary">View next lesson ({{ next_lesson.title }}) &rarr;</a>
    {% endif %}
    {% if not public and user.is_authenticated %}
      <a href="{% url 'instructors:syllabus_overview' %}" class="btn btn-outline-primary">Back to Syllabus</a>
      {% if user.instructor %}
        <a href="{% url 'admin:instructors_traininglesson_change' lesson.id %}" class="btn btn-outline-secondary">Edit This Lesson</a>
      {% endif %}
    {% endif %}
  </div>
{% endblock %}