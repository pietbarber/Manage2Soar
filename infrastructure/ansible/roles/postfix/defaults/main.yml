---
# ============================================================
# Postfix Role Defaults
# ============================================================
# These defaults can be overridden in group_vars or host_vars

# Postfix configuration directory
postfix_config_dir: /etc/postfix

# Mail server hostname (FQDN for this server)
# Defaults to the primary domain for single-host deployments
mail_hostname: "{{ m2s_domain }}"

# Primary mail domain
mail_domain: "{{ m2s_domain }}"

# IPs trusted to relay mail without authentication
# Be cautious - only include IPs that should be able to send mail
trusted_relay_ips: []

# SMTP authentication users for Django to send mail
# Each item: { username: "m2s", password: "secret" }
smtp_auth_users:
  - username: m2s
    password: "{{ vault_smtp_password | default('changeme') }}"

# ============================================================
# SMTP RELAY (Optional)
# ============================================================
# For cloud providers that block outbound port 25 (GCP, AWS, etc.),
# configure an external SMTP relay like SMTP2GO, SendGrid, or Mailgun.
# Leave smtp_relay_host undefined for direct delivery.

# smtp_relay_host: "mail.smtp2go.com"
# smtp_relay_port: 587
# smtp_relay_username: "your-username"
# smtp_relay_password: "{{ vault_smtp_relay_password }}"

# ============================================================
# TLS SETTINGS
# ============================================================
# Use Let's Encrypt certificates by default
postfix_tls_cert_file: "/etc/letsencrypt/live/{{ mail_hostname }}/fullchain.pem"
postfix_tls_key_file: "/etc/letsencrypt/live/{{ mail_hostname }}/privkey.pem"

# For self-signed certificates (testing only)
postfix_use_self_signed_cert: false

# ============================================================
# SINGLE-HOST MODE
# ============================================================
# For single-host deployments, we use simplified configuration:
# - Single domain (no multi-tenant)
# - Direct delivery (no relay) unless blocked
# - SASL auth for Django to send mail

single_host_mode: true

# Club domains for single-host mode (just one entry)
club_domains:
  - prefix: "{{ club_prefix | default('club') }}"
    name: "{{ club_name | default('My Soaring Club') }}"
